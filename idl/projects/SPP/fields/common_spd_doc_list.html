<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>projects/SPP/fields/common</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Sun Feb 10 18:16:25 2019.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>projects/SPP/fields/common</H1>
<LI><A HREF="#SPP_FLD_CDF_CREATE">SPP_FLD_CDF_CREATE</A>
<br>Creates a FIELDS CDF file using the CDF_CREATE function.
<LI><A HREF="#SPP_FLD_CDF_PUT_DATA">SPP_FLD_CDF_PUT_DATA</A>
<br>Stores SPP/FIELDS data in a created CDF file.
<LI><A HREF="#SPP_FLD_CDF_PUT_DEPEND">SPP_FLD_CDF_PUT_DEPEND</A>
<br>Add support variables to a SPP FIELDS CDF file.
<LI><A HREF="#SPP_FLD_CDF_PUT_METADATA">SPP_FLD_CDF_PUT_METADATA</A>
<br>Add metadata to a SPP FIELDS CDF file.
<LI><A HREF="#SPP_FLD_CDF_PUT_TIME">SPP_FLD_CDF_PUT_TIME</A>
<br>Add time data to a SPP FIELDS CDF file, in several formats.
<LI><A HREF="#SPP_FLD_CDF_TIMESPAN">SPP_FLD_CDF_TIMESPAN</A>
<br>Define a timestring for SPP FIELDS CDF files.
<LI><A HREF="#SPP_FLD_MAKE_CDF_L1">SPP_FLD_MAKE_CDF_L1</A>
<br>Produce a Level 1 CDF file for PSP/FIELDS data.  Level 1 files for FIELDS
<LI><A HREF="#SPP_FLD_TMLIB_INIT">SPP_FLD_TMLIB_INIT</A>
<br>Initializes TMlib configuration for loading PSP/FIELDS data.  TMlib
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="SPP_FLD_CDF_CREATE">
<H2>SPP_FLD_CDF_CREATE</H2></A>
<A HREF="#SPP_FLD_CDF_PUT_DATA">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_CDF_CREATE

 PURPOSE:
   Creates a FIELDS CDF file using the CDF_CREATE function.

 CALLING SEQUENCE:
   spp_fld_cdf_create, 1, 0, cdf_att, filename_timestring, $
     filename = filename, fileid = fileid

 INPUTS:
   LEVEL: The level (L1, L2, ...) of the created CDF file
   VERS_NUM: The version number of the file
   CDF_ATT: An IDL dictionary containing the global attributes of the CDF file,
     read (for L1 files) from the XML definition of the APID or (for higher
     level files) from the lower level CDF files.
   FILENAME_TIMESTRING: A string specifying the time string included in the
     CDF filename.  For a daily file, the format is YYYYMMDD.  For a specific
     non-daily interval, the format is YYYYMMDDHHMMSS_YYYYMMDDHHMMSS, with the
     two times specifying the start and end of the interval.

 OUTPUTS:
   FILENAME: The full path of the created CDF file.
   FILEID: The CDF file ID assigned to the created CDF file by CDF_CREATE.

 EXAMPLE:
   See call in SPP_FLD_MAKE_CDF_L1.

 CREATED BY:
   pulupa

 $LastChangedBy: pulupalap $
 $LastChangedDate: 2018-10-10 12:00:08 -0700 (Wed, 10 Oct 2018) $
 $LastChangedRevision: 25952 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_cdf_create.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_cdf_create.pro">projects/SPP/fields/common/spp_fld_cdf_create.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_CDF_PUT_DATA">
<H2>SPP_FLD_CDF_PUT_DATA</H2></A>
<A HREF="#SPP_FLD_CDF_CREATE">[Previous Routine]</A>
<A HREF="#SPP_FLD_CDF_PUT_DEPEND">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_CDF_PUT_DATA

 PURPOSE:
   Stores SPP/FIELDS data in a created CDF file.

 CALLING SEQUENCE:
   spp_fld_cdf_put_data, fileid, data, close = close

 INPUTS:
   FILEID: The file ID of the destination CDF file.
   DATA: A single IDL hash which contains items to be put into the
     CDF file.  The items themselves are hashes.  Each data item is itself
     an IDL hash which contains:
       - the parsed information from the corresponding XML file definition
         of the data item
       - the set of CDF attributes which will be stored as metadata in the
         CDF file
       - the data itself, as an IDL list.  The list is converted into an
         array before being stored in the CDF file.
     Items which do not have defined CDF attributes are not stored in the
     CDF file.
   CLOSE: Set to 1 to close the CDF after putting in the data.

 OUTPUTS:
   No explicit outputs are returned.  After completion, the data in the
   input IDL hash is stored in the specified CDF file.

 EXAMPLE:
   See call in SPP_FLD_MAKE_CDF_L1.

 CREATED BY:
   pulupa

 $LastChangedBy: pulupa $
 $LastChangedDate: 2018-10-08 17:26:08 -0700 (Mon, 08 Oct 2018) $
 $LastChangedRevision: 25932 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_cdf_put_data.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_cdf_put_data.pro">projects/SPP/fields/common/spp_fld_cdf_put_data.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_CDF_PUT_DEPEND">
<H2>SPP_FLD_CDF_PUT_DEPEND</H2></A>
<A HREF="#SPP_FLD_CDF_PUT_DATA">[Previous Routine]</A>
<A HREF="#SPP_FLD_CDF_PUT_METADATA">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_CDF_PUT_DEPEND

 PURPOSE:
   Add support variables to a SPP FIELDS CDF file.
   Some dimensional CDF variables (such as spectrograms) require additional
   support data which are not directly specified in the data packet.  
   For example, the frequencies of the RFS LFR and HFR spectra are not 
   included in the LFR and HFR packets.  The XML definition of the packet
   can optionally include a key (ADD_CDF_DEPEND_ROUTINE) which specifies
   an IDL routine that adds the support variable to the CDF.

 CALLING SEQUENCE:
   spp_fld_cdf_put_depend, fileid, idl_att = idl_att

 INPUTS:
   FILEID: The file ID of the destination CDF file.
   IDL_ATT: If set, contains the 'IDL_ATT' attributes returned from reading
     the XML file defining the structure of the data to be stored in the CDF.
     If this exists, and if it has a key ADD_CDF_DEPEND_ROUTINE, then the
     defined routine is run and adds support variable(s) to the CDF.
     If not, this routine has no effect.

 OUTPUTS:
   No explicit outputs are returned.  After completion, the support data is
   stored in the specified CDF file.

 EXAMPLE:
   See call in SPP_FLD_MAKE_CDF_L1.

 CREATED BY:
   pulupa

 $LastChangedBy: pulupalap $
 $LastChangedDate: 2017-01-11 16:14:34 -0800 (Wed, 11 Jan 2017) $
 $LastChangedRevision: 22579 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_cdf_put_depend.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_cdf_put_depend.pro">projects/SPP/fields/common/spp_fld_cdf_put_depend.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_CDF_PUT_METADATA">
<H2>SPP_FLD_CDF_PUT_METADATA</H2></A>
<A HREF="#SPP_FLD_CDF_PUT_DEPEND">[Previous Routine]</A>
<A HREF="#SPP_FLD_CDF_PUT_TIME">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_CDF_PUT_METADATA

 PURPOSE:
   Add metadata to a SPP FIELDS CDF file.
   This includes general metadata which applies for all SPP data products
   as well as file-specific attributes from the XML files which define
   the data items.  Variable attributes are created as well.

 CALLING SEQUENCE:
   spp_fld_cdf_put_metadata, fileid, filename, cdf_atts

 INPUTS:
   FILEID: The file ID of the destination CDF file.
   FILENAME: The name of the CDF file.
   CDF_ATTS: File-specific CDF attributes, read from the XML file which
     defines the data product.
   
 OUTPUTS:
   No explicit outputs are returned.  After completion, the data in the
   input IDL hash is stored in the specified CDF file.;

 EXAMPLE:
   See call in SPP_FLD_MAKE_CDF_L1.

 CREATED BY:
   pulupa

 $LastChangedBy: pulupalap $
 $LastChangedDate: 2018-05-08 15:00:03 -0700 (Tue, 08 May 2018) $
 $LastChangedRevision: 25182 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_cdf_put_metadata.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_cdf_put_metadata.pro">projects/SPP/fields/common/spp_fld_cdf_put_metadata.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_CDF_PUT_TIME">
<H2>SPP_FLD_CDF_PUT_TIME</H2></A>
<A HREF="#SPP_FLD_CDF_PUT_METADATA">[Previous Routine]</A>
<A HREF="#SPP_FLD_CDF_TIMESPAN">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_CDF_PUT_TIME

 PURPOSE:
   Add time data to a SPP FIELDS CDF file, in several formats.
   The formats are TT2000 time (which is stored in the CDF file as
   'epoch'), Unix time, and MET.

 CALLING SEQUENCE:
   spp_fld_cdf_put_time, fileid, times

 INPUTS:
   FILEID: The file ID of the destination CDF file.
   TIME: An array of times.
   SUFFIX: An optional parameter which adds a suffix

 OUTPUTS:
   No explicit outputs are returned.  After completion, the input times
   are stored in the CDF file.

 EXAMPLE:
   See call in SPP_FLD_MAKE_CDF_L1.

 CREATED BY:
   pulupa

 $LastChangedBy: pulupalap $
 $LastChangedDate: 2019-01-31 16:47:18 -0800 (Thu, 31 Jan 2019) $
 $LastChangedRevision: 26531 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_cdf_put_time.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_cdf_put_time.pro">projects/SPP/fields/common/spp_fld_cdf_put_time.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_CDF_TIMESPAN">
<H2>SPP_FLD_CDF_TIMESPAN</H2></A>
<A HREF="#SPP_FLD_CDF_PUT_TIME">[Previous Routine]</A>
<A HREF="#SPP_FLD_MAKE_CDF_L1">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_CDF_TIMESPAN

 PURPOSE:
   Define a timestring for SPP FIELDS CDF files.

 CALLING SEQUENCE:
   spp_fld_cdf_timespan, trange = trange, success = success, $
     filename_timestring = filename_timestring

 INPUTS:
   TRANGE: An optional one or two element input specifying the time range.
     A one element input implies a daily 24 hour file.  Two elements imply
     a specific start and end time.

 OUTPUTS:
   SUCCESS: Returns 1 if the timespan and timestring are set.
   FILENAME_TIMESTRING: Returns a string specifying the time string
     portion of the CDF file that will be created.  If the file is
     a daily file, the format is YYYYMMDD.  If the file is not
     a daily file, the format is YYYYMMDD_HHMMSS_YYYYMMDD_HHMMSS, with
     the two halves of the string corresponding to the start and
     end of the interval.

 EXAMPLE:
   See call in SPP_FLD_MAKE_CDF_L1.

 CREATED BY:
   pulupa

 $LastChangedBy: pulupa $
 $LastChangedDate: 2018-09-24 11:18:10 -0700 (Mon, 24 Sep 2018) $
 $LastChangedRevision: 25856 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_cdf_timespan.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_cdf_timespan.pro">projects/SPP/fields/common/spp_fld_cdf_timespan.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_MAKE_CDF_L1">
<H2>SPP_FLD_MAKE_CDF_L1</H2></A>
<A HREF="#SPP_FLD_CDF_TIMESPAN">[Previous Routine]</A>
<A HREF="#SPP_FLD_TMLIB_INIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_MAKE_CDF_L1

 PURPOSE:
   Produce a Level 1 CDF file for PSP/FIELDS data.  Level 1 files for FIELDS
   contain data from a single APID.  This top level program retrieves the
   APID-specific data from the packets stored in the FIELDS TMlib database,
   reads CDF metadata from an  APID-specific XML file, and stores the data in
   a L1 CDF file.

 CALLING SEQUENCE:
   spp_fld_make_cdf_l1, apid_name

 INPUTS:
   APID_NAME: The name of the APID for the L1 CDF.  Uses the abbreviated
     APID packet identifier rather than the hex code (e.g. 'rfs_lfr' instead of
     '0x2b2').
   VARFORMAT: Optional parameter that allows creation of a file with only a
     subset of data items from the packet.  For more information, see comments
     in SPP_FLD_LOAD_TMLIB_DATA.  If this keyword is not set, all items from
     the packet are loaded and stored in the L1 CDF file.
   TRANGE: If set, this time range is passed to SPP_FLD_CDF_TIMESPAN and
     used to define the time range for selection of data from the TMlib
     database.  If not set, the current TPLOT time span is used.
   LOAD: If set, loads the created CDF file into TPLOT variables after the
     file is saved.

 OUTPUTS:
   FILENAME: The full path of the created CDF file.
   FILEID: The CDF file ID assigned to the created CDF file by the
     SPP_FLD_CDF_CREATE.

 EXAMPLE:
   spp_fld_make_cdf_l1, 'rfs_lfr_auto', /load

 CREATED BY:
   pulupa

 $LastChangedBy: pulupalap $
 $LastChangedDate: 2018-11-09 16:45:57 -0800 (Fri, 09 Nov 2018) $
 $LastChangedRevision: 26103 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_make_cdf_l1.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_make_cdf_l1.pro">projects/SPP/fields/common/spp_fld_make_cdf_l1.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_TMLIB_INIT">
<H2>SPP_FLD_TMLIB_INIT</H2></A>
<A HREF="#SPP_FLD_MAKE_CDF_L1">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SPP_FLD_TMLIB_INIT

 PURPOSE:
   Initializes TMlib configuration for loading PSP/FIELDS data.  TMlib
   configuration information is stored in an IDL system variable,
   !SPP_FLD_TMLIB.

   Also calls routines which ensure that several helper functions (for
   example, functions which define frequencies for FIELDS spectral data
   products) are available for IDL to call.

 INPUTS:
   SERVER: Address of the TMlib server.
   TEST_CDF_DIR: The CDF creation routines save CDF files into a directory
     defined by the environment variable SPP_FLD_CDF_DIR.  If the TEST_CDF_DIR
     keyword is also set, any CDF files created will also be saved to that
     directory.

 EXAMPLE:

   spp_fld_tmlib_init, server = 'spffmdb.ssl.berkeley.edu'

 CREATED BY:
   pulupa

 $LastChangedBy: pulupa $
 $LastChangedDate: 2018-10-05 14:01:48 -0700 (Fri, 05 Oct 2018) $
 $LastChangedRevision: 25922 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/fields/common/spp_fld_tmlib_init.pro $
</PRE><P>
<STRONG>(See <A href="common/spp_fld_tmlib_init.pro">projects/SPP/fields/common/spp_fld_tmlib_init.pro</A>)</STRONG><P>
<HR>
 

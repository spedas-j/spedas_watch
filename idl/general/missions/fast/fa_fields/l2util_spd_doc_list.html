<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>general/missions/fast/fa_fields/l2util</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Mon Dec 15 18:16:58 2025.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>general/missions/fast/fa_fields/l2util</H1>
<LI><A HREF="#FA_TPLOT2CDF">FA_TPLOT2CDF</A>
<br>Save tplot variables into cdf file
<LI><A HREF="#FA_TPLOT_ADD_CDF_STRUCTURE">FA_TPLOT_ADD_CDF_STRUCTURE</A>
<br>In order to be saved in CDF file using TPLOT2CDF, tplot variable must have CDF
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="FA_TPLOT2CDF">
<H2>FA_TPLOT2CDF</H2></A>
<A HREF="#FA_TPLOT_ADD_CDF_STRUCTURE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
PROCEDURE:
  FA_TPLOT2CDF, ...
   
PURPOSE:
  Save tplot variables into cdf file
  tplot variable must have appropriate CDF structure as the option (limits) (see TPLOT_ADD_CDF_STRUCTURE, OPTIONS)
  Time (x variable of tplot) must be in SPEDAS (unix) format if TT2000 keyword is not specified, (see TIME_DOUBLE)
   
KEYWORDS:
   FILENAME: (string) Name of the cdf file to be saved. .cdf extension can be omitted.
   TVARS: (string or array of strings) Tplot variable name, or list of the tplot variables to be saved 
   DEFAULT_CDF_STRUCTURE: (flag) Create default CDF structure in tplot variables                   
   COMPRESS_CDF: (int) Compress CDF file. See CDF_COMPRESSION
   G_ATTRIBUTES: (struct) Global attributes of CDF file
   TT2000: (flag) Indicates that time is in TT2000 format.
  
  Additional keywords:    
   INQ: (struct) Structure of CDF file parameters, see TPLOT2CDF_SAVE_VARS code

EXAMPLES:   
   store_date, 'example_tplot',data={x:time_double('2001-01-01')+[1, 2, 3],y:[10, 20, 30]}
   tplot2cdf, filename='example_cdf_file', tvars='example_plot', /default  
   
   store_date, 'example_tplot2',data={x:time_double('2001-01-02')+[1, 2],y:[10, 20]}
   tplot2cdf, filename='example_cdf_file2', tvars=['example_plot', 'example_tplot2'], /default
  
  See crib_tplot2cdf_basic for additional examples 

CREATED BY:
  Alexander Drozdov
  jmm, 2024-04-18, changed to not default to default_cdf_structure,
                   creates a separate epoch variable for each tplot variable
   
 $LastChangedBy: jimm $
 $LastChangedDate: 2023-01-25 10:38:15 -0800 (Wed, 25 Jan 2023) $
 $LastChangedRevision: 31425 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/CDF/tplot2cdf.pro $
</PRE><P>
<STRONG>(See <A href="l2util/fa_tplot2cdf.pro">general/missions/fast/fa_fields/l2util/fa_tplot2cdf.pro</A>)</STRONG><P>
<HR>
 
<A NAME="FA_TPLOT_ADD_CDF_STRUCTURE">
<H2>FA_TPLOT_ADD_CDF_STRUCTURE</H2></A>
<A HREF="#FA_TPLOT2CDF">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
PROCEDURE:
  FA_TPLOT_ADD_CDF_STRUCTURE, tplot_vars, ...
   
PURPOSE:  
  In order to be saved in CDF file using TPLOT2CDF, tplot variable must have CDF
  structure as a tplot option (see OPTIONS) 
  The attributes of the tplot data (x, y or v) are stored in the CDF structure
  CDF.VARS     - structure of attributes that describe the data (tplot y variable)
  CDF.DEPEND_0 - structure of attributes that describe the time (tplot x variable)
  CDF.DEPEND_1 - structure of attributes that supporting data (tplot v or v1 variable)
  CDF.DEPEND_2 - structure of attributes that supporting data (tplot v2 variable)
  CDF.DEPEND_3 - structure of attributes that supporting data (tplot v3 variable)
  
  Each structure of attributes must have following fileds:
  CATDESC, DISPLAY_TYPE ,FIELDNAM, LABLAXIS, UNITS (automatically defined for time), VAR_TYPE
  FILLVAL, VALIDMIN, VALIDMAX, FORMAT defined based on the nature of the data
  
  If CDF structure already defined in the tplot variable the defined fields of 
  the CDF strucutre will remane the same. This means, if there was any mistake 
  (e.g. wrong Epoch format), then CDF structure must be recreated (for example, using /new keyword).  
  
  TPLOT_ADD_CDF_STRUCTURE adds appropriate CDF structure and defines some of the attributes base on the tplot data
  This procedure must be called before tplot2cdf. Alternatively, keyword /default of tplto2cdf2 can be used.
  Most of the attributes are defined as 'undefined' ans should be specify.  
  
  If tplot has 2d y, but variable v, that suppose to describe second dimension 
  is absent, then v will be created as an index of the second dimension of y
  If &quot;labels&quot; field is found in metadata (dlimits.lables) of the tplot variable and if number of elements 
  along second dimention of y is the same as number of labels, then v variable
  will be prepared to be LABL_PTR_1. 
  TPLOT_ADD_CDF_STRUCTURE supports only LABL_PTR_1 (one label pointer) case. 
   
  If tplot has n-d y but number of dimensions does not correspond to number or 
  supporting variables (x, v or v1, v2 ...) then extra supporting variables (v1, v2 ...) will be removed.
  This behaivour ensures the saving of the tplot into CDF file. 
  
  If tplot variable has only x, then data variable y = x will be created. 
   
INPUT:
   tplot_vars: (string or array of strings) Tplot variable name, or list of the tplot variables  
   
KEYWORDS:
   TT2000: (flag) Indicates that time should be included as TT2000
           If x type is double, x will be converted to LONG64 using CDF_PARSE_TT2000
   NEW: (flag) Create new CDF structure or ignore existing CDF
structure
   ADD_TNAME_TO_EPOCH: If set, the epoch variable for each of the input
                       tplot_vars is pre-pended to 'Epoch', so that
                       each tplot variable has it's own epoch variable.

EXAMPLES:   
   store_date, 'example_tplot',data={x:time_double('2001-01-01')+[1, 2, 3],y:[10, 20, 30]}
   tplot_add_cdf_structure, 'example_plot'  
   tplot2cdf, filename='example_cdf_file', tvars='example_plot'
  
  See crib_tplot2cdf_basic for additional examples 

CREATED BY:
  Alexander Drozdov

 $LastChangedBy: adrozdov $
 $LastChangedDate: 2023-06-05 13:04:09 -0700 (Mon, 05 Jun 2023) $
 $LastChangedRevision: 31884 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/CDF/tplot_add_cdf_structure.pro $
</PRE><P>
<STRONG>(See <A href="l2util/fa_tplot_add_cdf_structure.pro">general/missions/fast/fa_fields/l2util/fa_tplot_add_cdf_structure.pro</A>)</STRONG><P>
<HR>
 
